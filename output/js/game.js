var ne=Object.defineProperty;var h=(t,r)=>ne(t,"name",{value:r,configurable:!0});var z=new THREE.Color().setHex(8900331),re=-100,ae=-100,D=500,Y=50*Math.PI/180,K=20*Math.PI/180,ie=10*Math.PI/180,X=-Math.tan(Y)*500,se=Math.tan(K)*Math.sqrt(500**2+X**2),d=Object.freeze({DIR_LIGHT:{POSITION:{X:re,Y:ae},SHADOW:{CAMERA:{LEFT:-D,RIGHT:D,TOP:D,BOTTON:-D}}},CAMERA:{ROTATION:{X:Y,Y:K,Z:ie},POSITION:{X:se,Y:X}}}),E=15,c=42,F=3;var b=c*F,T=42;var Z=[20,45,60];function L(){let t=new THREE.Group,o=h(n=>new THREE.Mesh(new THREE.BoxBufferGeometry(T*2,c*2),new THREE.MeshPhongMaterial({color:n})),"createSection")(12252245);return o.receiveShadow=!0,t.add(o),t.position.z=1.5*2,t}h(L,"GrassTile");function N(){let t=new THREE.Group,o=h(n=>new THREE.Mesh(new THREE.BoxBufferGeometry(T*2,c*2),new THREE.MeshPhongMaterial({color:n})),"createSection")(4541017);return o.receiveShadow=!0,t.add(o),t.position.z=1.5*2,t}h(N,"RoadTile");function U(){let t=new THREE.Group,o=h(n=>new THREE.Mesh(new THREE.BoxBufferGeometry(T*2,c*2),new THREE.MeshPhongMaterial({color:n})),"createSection")(33023);return o.receiveShadow=!0,t.add(o),t.position.z=1.5*2,t}h(U,"WaterTile");function j(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));r.position.z=10*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=Z[Math.floor(Math.random()*Z.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,o*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return n.position.z=(o/2+20)*2,n.castShadow=!0,n.receiveShadow=!1,t.add(n),t}h(j,"ThreeTile");function V(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.IcosahedronGeometry(15*2,1),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return r.castShadow=!0,r.receiveShadow=!0,t.add(r),t}h(V,"RockTile");function q(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(5*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));r.position.z=40*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(130*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return o.position.z=120*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o),t}h(q,"CVBoard");var me=new H(40,80,[{x:0,y:10,w:30,h:60}]),Oe=new H(40,80,[{x:10,y:10,w:30,h:60}]),Se=new H(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),He=new H(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),ge=new H(30,30,[{x:15,y:0,w:10,h:30}]),Pe=new H(25,30,[{x:0,y:15,w:10,h:10}]),ye=new H(25,30,[{x:0,y:5,w:10,h:10}]);function H(t,r,o){let n=document.createElement("canvas");n.width=t,n.height=r;let s=n.getContext("2d");return s.fillStyle="#ffffff",s.fillRect(0,0,t,r),s.fillStyle="rgba(0,0,0,0.6)",o.forEach(i=>{s.fillRect(i.x,i.y,i.w,i.h)}),new THREE.CanvasTexture(n)}h(H,"Texture");var R={GRASS:0,ROAD:1,THREE:2,ROCK:3,OCCUPIED:4,WATER:5,B:0,C:0,TOURBUILDING:8,BOARD:9},M=[[1,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,2],[1,0,0,0,0,1,0,9,0,0,2,0,2,2,2,0,2,0,2,2,0,0,0,2,2,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,0,2,0,2,0,0,0,2,2,2,2,2,2,0,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,1,2,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2],[1,0,0,0,0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,0,0,0,0,1,4,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,4,4,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,4,4,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,5,5,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,2,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,5,5,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function J(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*T*2,2*c*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));r.position.z=10*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*T*2,1*c*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));o.position.z=30*2,o.position.y=T,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*T*2,2*c*2,2*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));n.position.z=41*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let s=new THREE.Mesh(new THREE.BoxBufferGeometry(3*T*2,2*2,20*2),new THREE.MeshPhongMaterial({color:6829312,flatShading:!0}));return s.position.z=T*2+T/2,s.position.y=-T*2,s.castShadow=!0,s.receiveShadow=!0,t.add(s),t}h(J,"TourBuilding");function Q(t){let r=new Array(M.length);for(let o=0;o<M.length;o++){r[o]=new Array(M[o].length);for(let n=0;n<M[o].length;n++){let s=new ce(M[o][n],o,n);s.mesh.position.x=o*c*2-c*2,s.mesh.position.y=n*c*2,t.add(s.mesh),r[o][n]=s}}return r}h(Q,"generateMap");function ce(t,r,o){this.x_index=r,this.y_index=o,this.type=t,this.occupiedPosition=!1;let n=null;switch(this.type){case R.GRASS:this.mesh=new L;break;case R.ROAD:this.mesh=new N;break;case R.THREE:this.mesh=new L,n=new j,n.position.x=c*2-c*2,this.mesh.add(n),this.occupiedPosition=!0;break;case R.ROCK:this.mesh=new L,n=new V,n.position.x=c*2-c*2,this.mesh.add(n),this.occupiedPosition=!0;break;case R.OCCUPIED:this.mesh=new N,this.occupiedPosition=!0;break;case R.WATER:this.mesh=new U,this.occupiedPosition=!0;break;case R.TOURBUILDING:this.mesh=new N,n=new J,n.position.x=c*2,n.position.y=c*2/-2,this.mesh.add(n),this.occupiedPosition=!0;break;case R.BOARD:this.mesh=new N,n=new q,n.position.x=c*2-c*2,this.mesh.add(n),this.occupiedPosition=!0;break;default:this.mesh=new L;break}}h(ce,"Tile");var a=Object.freeze({COW:{BASE:"rgb(255, 255, 255)",BROWN:"rgb(105, 59, 7)",PINK:"rgb(232, 106, 218)",BLACK:"rgb(0, 0, 0)"}}),W=Object.freeze({COW:{RIGHT:new k(70,70,[{x:0,y:20,w:20,h:40,color:a.COW.BROWN},{x:20,y:30,w:10,h:20,color:a.COW.BROWN},{x:30,y:0,w:10,h:10,color:a.COW.PINK}]),LEFT:new k(70,70,[{x:50,y:0,w:20,h:40,color:a.COW.BROWN},{x:40,y:0,w:10,h:30,color:a.COW.BROWN},{x:30,y:10,w:10,h:10,color:a.COW.BROWN},{x:50,y:60,w:20,h:10,color:a.COW.BROWN},{x:10,y:40,w:20,h:10,color:a.COW.BROWN},{x:30,y:0,w:10,h:10,color:a.COW.PINK}]),FRONT:new k(70,70,[{x:30,y:60,w:10,h:10,color:a.COW.BROWN},{x:0,y:40,w:30,h:30,color:a.COW.BROWN},{x:10,y:30,w:10,h:10,color:a.COW.BROWN},{x:10,y:40,w:10,h:10,color:a.COW.BLACK},{x:50,y:40,w:10,h:10,color:a.COW.BLACK},{x:0,y:30,w:10,h:10,color:a.COW.PINK},{x:60,y:30,w:10,h:10,color:a.COW.PINK},{x:20,y:20,w:30,h:20,color:a.COW.PINK}]),BACK:new k(70,70,[{x:0,y:0,w:10,h:20,color:a.COW.BROWN},{x:10,y:0,w:10,h:10,color:a.COW.BROWN},{x:30,y:50,w:10,h:10,color:a.COW.BLACK}]),TOP:new k(70,70,[{x:0,y:0,w:30,h:30,color:a.COW.BROWN},{x:30,y:0,w:10,h:10,color:a.COW.BROWN},{x:0,y:30,w:10,h:10,color:a.COW.BROWN},{x:10,y:10,w:10,h:10,color:a.COW.BLACK},{x:50,y:10,w:10,h:10,color:a.COW.BLACK},{x:0,y:60,w:20,h:10,color:a.COW.BROWN},{x:60,y:20,w:10,h:40,color:a.COW.BROWN},{x:50,y:30,w:10,h:10,color:a.COW.BROWN}])}});function $(t){switch(t){case"cow":return he();default:return le()}}h($,"Player");function he(){let t=new THREE.Group,r=[new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:W.COW.RIGHT}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:W.COW.LEFT}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:W.COW.FRONT}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:W.COW.BACK}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:W.COW.TOP}),new THREE.MeshBasicMaterial({color:15733283,side:THREE.DoubleSide})],o=new THREE.Mesh(new THREE.BoxGeometry(E*2,E*2,E*2),r);o.position.z=8*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(6*2,3*2,4*2),new THREE.MeshLambertMaterial({color:a.COW.PINK,flatShading:!0}));n.position.z=E/2*2,n.position.y=E/2*2,n.castShadow=!0,n.receiveShadow=!1,t.add(n);let s=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:a.COW.BLACK,flatShading:!0}));s.position.z=(E+1.5)*2,s.position.y=E/3.5*2,s.position.x=E/3.3*2,s.castShadow=!0,s.receiveShadow=!1,t.add(s);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:a.COW.BLACK,flatShading:!0}));i.position.z=(E+1.5)*2,i.position.y=E/3.5*2,i.position.x=-(E/3.3)*2,i.castShadow=!0,i.receiveShadow=!1,t.add(i);let P=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:a.COW.BASE,flatShading:!0}));P.position.z=(E-2)*2,P.position.y=E/3.5*2,P.position.x=-(E/1.8)*2,P.castShadow=!0,P.receiveShadow=!1,t.add(P);let y=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:a.COW.BASE,flatShading:!0}));y.position.z=(E-2)*2,y.position.y=E/3.5*2,y.position.x=E/1.8*2,y.castShadow=!0,y.receiveShadow=!1,t.add(y);let C=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,4*2),new THREE.MeshLambertMaterial({color:a.COW.BLACK,flatShading:!0}));return C.position.z=E/3*2,C.position.y=-(E/1.8)*2,C.castShadow=!0,C.receiveShadow=!1,t.add(C),t}h(he,"cowPlayer");function le(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(E*2,E*2,20*2),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));r.position.z=10*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,4*2,2*2),new THREE.MeshLambertMaterial({color:15753626,flatShading:!0}));return o.position.z=21*2,o.castShadow=!0,o.receiveShadow=!1,t.add(o),t}h(le,"originalChickenPlayer");function k(t,r,o){let n=document.createElement("canvas");n.width=t,n.height=r;let s=n.getContext("2d");return o.forEach(i=>{s.fillStyle=i.color,s.fillRect(i.x,i.y,i.w,i.h)}),new THREE.CanvasTexture(n)}h(k,"CanvasTexture");var ee=document.getElementById("counter"),Ee=document.getElementById("end"),we=M[0].length,ue=M.length,S=new THREE.Scene;S.background=z;var f=new THREE.OrthographicCamera(globalThis.innerWidth/-2,globalThis.innerWidth/2,globalThis.innerHeight/2,globalThis.innerHeight/-2,.1,1e4);f.rotation.x=d.CAMERA.ROTATION.X;f.rotation.y=d.CAMERA.ROTATION.Y;f.rotation.z=d.CAMERA.ROTATION.Z;f.position.y=d.CAMERA.POSITION.Y;f.position.x=d.CAMERA.POSITION.X;f.position.z=500;var A,I,B,x,G,g,m,p,l=new $("cow");S.add(l);var Te=new THREE.HemisphereLight(16777215,16777215,.6);S.add(Te);var w=new THREE.DirectionalLight(16777215,.6);w.position.set(d.DIR_LIGHT.POSITION.X,d.DIR_LIGHT.POSITION.Y,200);w.castShadow=!0;w.target=l;S.add(w);w.shadow.mapSize.width=2048;w.shadow.mapSize.height=2048;w.shadow.camera.left=d.DIR_LIGHT.SHADOW.CAMERA.LEFT;w.shadow.camera.right=d.DIR_LIGHT.SHADOW.CAMERA.RIGHT;w.shadow.camera.top=d.DIR_LIGHT.SHADOW.CAMERA.TOP;w.shadow.camera.bottom=d.DIR_LIGHT.SHADOW.CAMERA.BOTTON;var v=new THREE.DirectionalLight(0,.4);v.position.set(200,200,50);v.castShadow=!0;S.add(v);var te=h(()=>{A=Q(S),I=0,B=1,G=null,g=!1,m=[],p="forward",l.position.x=0,l.position.y=0,l.rotation.z=0,f.position.y=d.CAMERA.POSITION.Y,f.position.x=d.CAMERA.POSITION.X,w.position.x=d.DIR_LIGHT.POSITION.X,w.position.y=d.DIR_LIGHT.POSITION.Y},"initaliseValues");te();var _=new THREE.WebGLRenderer({alpha:!0,antialias:!0});_.shadowMap.enabled=!0;_.shadowMap.type=THREE.PCFSoftShadowMap;_.setSize(globalThis.innerWidth,globalThis.innerHeight);document.body.appendChild(_.domElement);function O(t){if(m.length>=2)return;let r=m.reduce((o,n)=>{if(n==="forward")return{lane:o.lane+1,column:o.column};if(n==="backward")return{lane:o.lane-1,column:o.column};if(n==="left")return{lane:o.lane,column:o.column-1};if(n==="right")return{lane:o.lane,column:o.column+1}},{lane:I,column:B});if(t==="forward"){if(r.lane===we-1||A[r.column][r.lane+1].occupiedPosition===!0)return;x||(g=!0)}else if(t==="backward"){if(r.lane===0||A[r.column][r.lane-1].occupiedPosition===!0)return;x||(g=!0)}else if(t==="left"){if(r.column===0||A[r.column-1][r.lane].occupiedPosition===!0)return;x||(g=!0)}else if(t==="right"){if(r.column===ue-1||A[r.column+1][r.lane].occupiedPosition===!0)return;x||(g=!0)}m.push(t)}h(O,"move");document.querySelector("#retry").addEventListener("click",()=>{A.forEach(t=>t.forEach(r=>S.remove(r))),te(),Ee.style.visibility="hidden"});document.getElementById("forward").addEventListener("click",()=>O("forward"));document.getElementById("backward").addEventListener("click",()=>O("backward"));document.getElementById("left").addEventListener("click",()=>O("left"));document.getElementById("right").addEventListener("click",()=>O("right"));globalThis.addEventListener("keydown",t=>{t.keyCode=="38"?O("forward"):t.keyCode=="40"?O("backward"):t.keyCode=="37"?O("left"):t.keyCode=="39"&&O("right")});function oe(t){requestAnimationFrame(oe),G||(G=t);let r=t-G;if(G=t,g&&(x=t,g=!1),x){let o=t-x,n=Math.min(o/200,1)*c*2,s=Math.sin(Math.min(o/200,1)*Math.PI)*8*2;switch(m[0]){case"forward":{let i=I*c*2+n;switch(f.position.y=d.CAMERA.POSITION.Y+i,w.position.y=d.DIR_LIGHT.POSITION.Y+i,l.position.y=i,l.position.z=s,p){case"left":l.rotation.z=-(Math.min(o/200,1)-1)*Math.PI/2;break;case"right":l.rotation.z=(Math.min(o/200,1)-1)*Math.PI/2;break;case"backward":l.rotation.z=(Math.min(o/200,1)-1)*Math.PI;break;default:break}break}case"backward":{let i=I*c*2-n;switch(f.position.y=d.CAMERA.POSITION.Y+i,w.position.y=d.DIR_LIGHT.POSITION.Y+i,l.position.y=i,l.position.z=s,p){case"forward":l.rotation.z=-(Math.min(o/200,1)*Math.PI);break;case"left":l.rotation.z=Math.min(o/200,1)*Math.PI/2+Math.PI/2;break;case"right":l.rotation.z=-(Math.min(o/200,1)*Math.PI/2+Math.PI/2);break;default:break}break}case"left":{let i=(B*c+c/2)*2-b*2/2-n;switch(f.position.x=d.CAMERA.POSITION.X+i,w.position.x=d.DIR_LIGHT.POSITION.X+i,l.position.x=i,l.position.z=s,p){case"forward":l.rotation.z=Math.min(o/200,1)*Math.PI/2;break;case"backward":l.rotation.z=-(Math.min(o/200,1)*Math.PI/2-Math.PI);break;case"right":l.rotation.z=-(Math.min(o/200,1)*Math.PI+Math.PI/2);break;default:break}break}case"right":{let i=(B*c+c/2)*2-b*2/2+n;switch(f.position.x=d.CAMERA.POSITION.X+i,w.position.x=d.DIR_LIGHT.POSITION.X+i,l.position.x=i,l.position.z=s,p){case"forward":l.rotation.z=-(Math.min(o/200,1)*Math.PI/2);break;case"backward":l.rotation.z=Math.min(o/200,1)*Math.PI/2-Math.PI;break;case"left":l.rotation.z=Math.min(o/200,1)*Math.PI+Math.PI/2;break;default:break}break}}if(o>200){switch(m[0]){case"forward":{I++,ee.innerHTML=I,p="forward";break}case"backward":{I--,ee.innerHTML=I,p="backward";break}case"left":{B--,p="left";break}case"right":{B++,p="right";break}}m.shift(),x=m.length===0?null:t}}_.render(S,f)}h(oe,"animate");requestAnimationFrame(oe);
