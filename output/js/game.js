var le=Object.defineProperty;var c=(t,n)=>le(t,"name",{value:n,configurable:!0});var z=new THREE.Color().setHex(8900331),we=-100,ue=-100,D=500,F=50*Math.PI/180,Y=20*Math.PI/180,Te=10*Math.PI/180,K=-Math.tan(F)*500,fe=Math.tan(Y)*Math.sqrt(500**2+K**2),l=Object.freeze({DIR_LIGHT:{POSITION:{X:we,Y:ue},SHADOW:{CAMERA:{LEFT:-D,RIGHT:D,TOP:D,BOTTON:-D}}},CAMERA:{ROTATION:{X:F,Y,Z:Te},POSITION:{X:fe,Y:K}}}),w=15,d=42,X=3;var L=d*X,s=42;var U=[20,45,60];function G(){let t=new THREE.Group,r=c(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(s*2,d*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(12252245);return r.receiveShadow=!0,t.add(r),t.position.z=1.5*2,t}c(G,"GrassTile");function M(){let t=new THREE.Group,r=c(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(s*2,d*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(4541017);return r.receiveShadow=!0,t.add(r),t.position.z=1.5*2,t}c(M,"RoadTile");function Z(){let t=new THREE.Group,r=c(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(s*2,d*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(33023);return r.receiveShadow=!0,t.add(r),t.position.z=1.5*2,t}c(Z,"WaterTile");function V(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));n.position.z=10*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=U[Math.floor(Math.random()*U.length)],o=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,r*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return o.position.z=(r/2+20)*2,o.castShadow=!0,o.receiveShadow=!1,t.add(o),t}c(V,"ThreeTile");function j(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.IcosahedronGeometry(15*2,1),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return n.castShadow=!0,n.receiveShadow=!0,t.add(n),t}c(j,"RockTile");function q(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(5*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));n.position.z=40*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(130*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return r.position.z=120*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r),t}c(q,"CVBoard");var J=[10822947,12432952,7909707],Re=new g(40,80,[{x:0,y:10,w:30,h:60}]),Me=new g(40,80,[{x:10,y:10,w:30,h:60}]),pe=new g(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),xe=new g(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),Ne=new g(30,30,[{x:15,y:0,w:10,h:30}]),We=new g(25,30,[{x:0,y:15,w:10,h:10}]),_e=new g(25,30,[{x:0,y:5,w:10,h:10}]);function $(){let t=new THREE.Group,n=J[Math.floor(Math.random()*J.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(60*2,30*2,15*2),new THREE.MeshPhongMaterial({color:n,flatShading:!0}));r.position.z=12*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(33*2,24*2,12*2),[new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:Me}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:Re}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:pe}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:xe}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0})]);o.position.x=6*2,o.position.z=25.5*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let a=new Q;a.position.x=-18*2,t.add(a);let i=new Q;return i.position.x=18*2,t.add(i),t.castShadow=!0,t.receiveShadow=!1,t}c($,"Car");function Q(){let t=new THREE.Mesh(new THREE.BoxBufferGeometry(12*2,33*2,12*2),new THREE.MeshLambertMaterial({color:3355443,flatShading:!0}));return t.position.z=6*2,t}c(Q,"Wheel");function g(t,n,r){let o=document.createElement("canvas");o.width=t,o.height=n;let a=o.getContext("2d");return a.fillStyle="#ffffff",a.fillRect(0,0,t,n),a.fillStyle="rgba(0,0,0,0.6)",r.forEach(i=>{a.fillRect(i.x,i.y,i.w,i.h)}),new THREE.CanvasTexture(o)}c(g,"Texture");var u={GRASS:0,ROAD:1,THREE:2,ROCK:3,OCCUPIED:4,WATER:5,VEHICLE:6,C:0,TOURBUILDING:8,BOARD:9,LUBTRAC_CONTAINNER:10,LUBTRAC_BOARD:11,BOSCH_CUBES:12,BOSCH_BOARD:13,BOSCH_DIGITAL:14,AG_BOARD:15},p=[[1,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,2],[1,0,0,0,0,1,0,9,0,0,2,0,2,2,2,0,2,0,2,2,0,0,0,2,2,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,0,2,0,2,0,0,0,2,2,2,2,2,2,0,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,1,2,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2],[1,0,0,0,0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,0,0,0,0,1,4,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,4,4,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,4,4,0,0,0,0,0,1,1,1,0,0,1,10,4,0,0,1,6,1,12,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,1,0,15,1,1,0,0,11,4,4,0,0,13,4,1,14,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,5,5,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,2,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,5,5,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function ee(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,2*d*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));n.position.z=10*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,1*d*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));r.position.z=30*2,r.position.y=s,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,2*d*2,2*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));o.position.z=41*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let a=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,2*2,20*2),new THREE.MeshPhongMaterial({color:6829312,flatShading:!0}));return a.position.z=s*2+s/2,a.position.y=-s*2,a.castShadow=!0,a.receiveShadow=!0,t.add(a),t}c(ee,"TourBuilding");function te(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.CylinderGeometry(35*2,35*2,2*s*2,10),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));return n.position.z=s*2,n.position.y=s*2/2,n.position.x=s*2/2,n.rotation.x=Math.PI/2,n.castShadow=!0,n.receiveShadow=!0,t.add(n),t}c(te,"LubtracContainner");function oe(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));n.position.z=30*2,n.position.y=s*2/-2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));r.position.z=30*2,r.position.y=s*2/2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,s*2,20*2),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));o.position.z=30*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let a=new THREE.Mesh(new THREE.BoxBufferGeometry(6*2,s*2,30*2),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));return a.position.z=75*2,a.castShadow=!0,a.receiveShadow=!0,t.add(a),t}c(oe,"LubtracBoard");function ne(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(10*2,10*2,10*2),new THREE.MeshPhongMaterial({color:1197863,flatShading:!0}));n.position.z=5*2,n.position.y=s*2/-4,n.position.x=s*2/-4,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(10*2,10*2,10*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));r.position.z=5*2,r.position.y=s*2/4,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(10*2,10*2,10*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));return o.position.z=5*2,o.position.y=s*2/-4,o.position.x=s*2/4,o.castShadow=!0,o.receiveShadow=!0,t.add(o),t}c(ne,"BoschCubes");function re(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));n.position.z=30*2,n.position.y=s*2/-2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));r.position.z=30*2,r.position.y=s*2/2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(6*2,s*2,30*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));return o.position.z=75*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o),t}c(re,"BoschBoard");function ae(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,s*2,s*2),new THREE.MeshPhongMaterial({color:0,flatShading:!0}));return n.position.z=s*2/2,n.castShadow=!0,n.receiveShadow=!0,t.add(n),t}c(ae,"BoschDigital");function ie(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,s*2,s*2),new THREE.MeshPhongMaterial({color:16744448,flatShading:!0}));return n.position.z=s*2/2,n.castShadow=!0,n.receiveShadow=!0,t.add(n),t}c(ie,"AGBoard");function se(t){let n=new Array(p.length);for(let r=0;r<p.length;r++){n[r]=new Array(p[r].length);for(let o=0;o<p[r].length;o++){let a=new He(p[r][o],r,o);a.mesh.position.x=r*d*2-d*2,a.mesh.position.y=o*d*2,t.add(a.mesh),n[r][o]=a}}return n}c(se,"generateMap");function He(t,n,r){this.x_index=n,this.y_index=r,this.type=t,this.occupiedPosition=!1;let o=null;switch(this.type){case u.GRASS:this.mesh=new G;break;case u.ROAD:this.mesh=new M;break;case u.THREE:this.mesh=new G,o=new V,o.position.x=d*2-d*2,this.mesh.add(o),this.occupiedPosition=!0;break;case u.ROCK:this.mesh=new G,o=new j,o.position.x=d*2-d*2,this.mesh.add(o),this.occupiedPosition=!0;break;case u.OCCUPIED:this.mesh=new M,this.occupiedPosition=!0;break;case u.WATER:this.mesh=new Z,this.occupiedPosition=!0;break;case u.VEHICLE:this.mesh=new M,o=new $,o.position.x=d*2/2,this.mesh.add(o),this.occupiedPosition=!0;break;case u.TOURBUILDING:this.mesh=new M,o=new ee,o.position.x=d*2,o.position.y=d*2/-2,this.mesh.add(o),this.occupiedPosition=!0;break;case u.BOARD:this.mesh=new M,o=new q,this.mesh.add(o),this.occupiedPosition=!0;break;case u.LUBTRAC_CONTAINNER:this.mesh=new M,o=new te,this.mesh.add(o),this.occupiedPosition=!0;break;case u.LUBTRAC_BOARD:this.mesh=new M,o=new oe,this.mesh.add(o),this.occupiedPosition=!0;break;case u.BOSCH_CUBES:this.mesh=new M,o=new ne,this.mesh.add(o),this.occupiedPosition=!0;break;case u.BOSCH_BOARD:this.mesh=new M,o=new re,this.mesh.add(o),this.occupiedPosition=!0;break;case u.BOSCH_DIGITAL:this.mesh=new M,o=new ae,this.mesh.add(o),this.occupiedPosition=!0;break;case u.AG_BOARD:this.mesh=new M,o=new ie,this.mesh.add(o),this.occupiedPosition=!0;break;default:this.mesh=new G;break}}c(He,"Tile");var h=Object.freeze({COW:{BASE:"rgb(255, 255, 255)",BROWN:"rgb(105, 59, 7)",PINK:"rgb(232, 106, 218)",BLACK:"rgb(0, 0, 0)"}}),N=Object.freeze({COW:{RIGHT:new W(70,70,[{x:0,y:20,w:20,h:40,color:h.COW.BROWN},{x:20,y:30,w:10,h:20,color:h.COW.BROWN},{x:30,y:0,w:10,h:10,color:h.COW.PINK}]),LEFT:new W(70,70,[{x:50,y:0,w:20,h:40,color:h.COW.BROWN},{x:40,y:0,w:10,h:30,color:h.COW.BROWN},{x:30,y:10,w:10,h:10,color:h.COW.BROWN},{x:50,y:60,w:20,h:10,color:h.COW.BROWN},{x:10,y:40,w:20,h:10,color:h.COW.BROWN},{x:30,y:0,w:10,h:10,color:h.COW.PINK}]),FRONT:new W(70,70,[{x:30,y:60,w:10,h:10,color:h.COW.BROWN},{x:0,y:40,w:30,h:30,color:h.COW.BROWN},{x:10,y:30,w:10,h:10,color:h.COW.BROWN},{x:10,y:40,w:10,h:10,color:h.COW.BLACK},{x:50,y:40,w:10,h:10,color:h.COW.BLACK},{x:0,y:30,w:10,h:10,color:h.COW.PINK},{x:60,y:30,w:10,h:10,color:h.COW.PINK},{x:20,y:20,w:30,h:20,color:h.COW.PINK}]),BACK:new W(70,70,[{x:0,y:0,w:10,h:20,color:h.COW.BROWN},{x:10,y:0,w:10,h:10,color:h.COW.BROWN},{x:30,y:50,w:10,h:10,color:h.COW.BLACK}]),TOP:new W(70,70,[{x:0,y:0,w:30,h:30,color:h.COW.BROWN},{x:30,y:0,w:10,h:10,color:h.COW.BROWN},{x:0,y:30,w:10,h:10,color:h.COW.BROWN},{x:10,y:10,w:10,h:10,color:h.COW.BLACK},{x:50,y:10,w:10,h:10,color:h.COW.BLACK},{x:0,y:60,w:20,h:10,color:h.COW.BROWN},{x:60,y:20,w:10,h:40,color:h.COW.BROWN},{x:50,y:30,w:10,h:10,color:h.COW.BROWN}])}});function ce(t){switch(t){case"cow":return Se();default:return me()}}c(ce,"Player");function Se(){let t=new THREE.Group,n=[new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:N.COW.RIGHT}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:N.COW.LEFT}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:N.COW.FRONT}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:N.COW.BACK}),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:N.COW.TOP}),new THREE.MeshBasicMaterial({color:15733283,side:THREE.DoubleSide})],r=new THREE.Mesh(new THREE.BoxGeometry(w*2,w*2,w*2),n);r.position.z=8*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(6*2,3*2,4*2),new THREE.MeshLambertMaterial({color:h.COW.PINK,flatShading:!0}));o.position.z=w/2*2,o.position.y=w/2*2,o.castShadow=!0,o.receiveShadow=!1,t.add(o);let a=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:h.COW.BLACK,flatShading:!0}));a.position.z=(w+1.5)*2,a.position.y=w/3.5*2,a.position.x=w/3.3*2,a.castShadow=!0,a.receiveShadow=!1,t.add(a);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:h.COW.BLACK,flatShading:!0}));i.position.z=(w+1.5)*2,i.position.y=w/3.5*2,i.position.x=-(w/3.3)*2,i.castShadow=!0,i.receiveShadow=!1,t.add(i);let P=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:h.COW.BASE,flatShading:!0}));P.position.z=(w-2)*2,P.position.y=w/3.5*2,P.position.x=-(w/1.8)*2,P.castShadow=!0,P.receiveShadow=!1,t.add(P);let y=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,2*2),new THREE.MeshLambertMaterial({color:h.COW.BASE,flatShading:!0}));y.position.z=(w-2)*2,y.position.y=w/3.5*2,y.position.x=w/1.8*2,y.castShadow=!0,y.receiveShadow=!1,t.add(y);let b=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,2*2,4*2),new THREE.MeshLambertMaterial({color:h.COW.BLACK,flatShading:!0}));return b.position.z=w/3*2,b.position.y=-(w/1.8)*2,b.castShadow=!0,b.receiveShadow=!1,t.add(b),t}c(Se,"cowPlayer");function me(){let t=new THREE.Group,n=new THREE.Mesh(new THREE.BoxBufferGeometry(w*2,w*2,20*2),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));n.position.z=10*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(2*2,4*2,2*2),new THREE.MeshLambertMaterial({color:15753626,flatShading:!0}));return r.position.z=21*2,r.castShadow=!0,r.receiveShadow=!1,t.add(r),t}c(me,"originalChickenPlayer");function W(t,n,r){let o=document.createElement("canvas");o.width=t,o.height=n;let a=o.getContext("2d");return r.forEach(i=>{a.fillStyle=i.color,a.fillRect(i.x,i.y,i.w,i.h)}),new THREE.CanvasTexture(o)}c(W,"CanvasTexture");var he=document.getElementById("counter"),Oe=document.getElementById("end"),ge=p[0].length,Be=p.length,O=new THREE.Scene;O.background=z;var R=new THREE.OrthographicCamera(globalThis.innerWidth/-2,globalThis.innerWidth/2,globalThis.innerHeight/2,globalThis.innerHeight/-2,.1,1e4);R.rotation.x=l.CAMERA.ROTATION.X;R.rotation.y=l.CAMERA.ROTATION.Y;R.rotation.z=l.CAMERA.ROTATION.Z;R.position.y=l.CAMERA.POSITION.Y;R.position.x=l.CAMERA.POSITION.X;R.position.z=500;var A,S,C,H,_,B,m,x,E=new ce("cow");O.add(E);var Pe=new THREE.HemisphereLight(16777215,16777215,.6);O.add(Pe);var T=new THREE.DirectionalLight(16777215,.6);T.position.set(l.DIR_LIGHT.POSITION.X,l.DIR_LIGHT.POSITION.Y,200);T.castShadow=!0;T.target=E;O.add(T);T.shadow.mapSize.width=2048;T.shadow.mapSize.height=2048;T.shadow.camera.left=l.DIR_LIGHT.SHADOW.CAMERA.LEFT;T.shadow.camera.right=l.DIR_LIGHT.SHADOW.CAMERA.RIGHT;T.shadow.camera.top=l.DIR_LIGHT.SHADOW.CAMERA.TOP;T.shadow.camera.bottom=l.DIR_LIGHT.SHADOW.CAMERA.BOTTON;var v=new THREE.DirectionalLight(0,.4);v.position.set(200,200,50);v.castShadow=!0;O.add(v);var de=c(()=>{A=se(O),S=0,C=1,_=null,B=!1,m=[],x="forward",E.position.x=0,E.position.y=0,E.rotation.z=0,R.position.y=l.CAMERA.POSITION.Y,R.position.x=l.CAMERA.POSITION.X,T.position.x=l.DIR_LIGHT.POSITION.X,T.position.y=l.DIR_LIGHT.POSITION.Y},"initaliseValues");de();var k=new THREE.WebGLRenderer({alpha:!0,antialias:!0});k.shadowMap.enabled=!0;k.shadowMap.type=THREE.PCFSoftShadowMap;k.setSize(globalThis.innerWidth,globalThis.innerHeight);document.body.appendChild(k.domElement);function I(t){if(m.length>=2)return;let n=m.reduce((r,o)=>{if(o==="forward")return{lane:r.lane+1,column:r.column};if(o==="backward")return{lane:r.lane-1,column:r.column};if(o==="left")return{lane:r.lane,column:r.column-1};if(o==="right")return{lane:r.lane,column:r.column+1}},{lane:S,column:C});if(t==="forward"){if(n.lane===ge-1||A[n.column][n.lane+1].occupiedPosition===!0)return;H||(B=!0)}else if(t==="backward"){if(n.lane===0||A[n.column][n.lane-1].occupiedPosition===!0)return;H||(B=!0)}else if(t==="left"){if(n.column===0||A[n.column-1][n.lane].occupiedPosition===!0)return;H||(B=!0)}else if(t==="right"){if(n.column===Be-1||A[n.column+1][n.lane].occupiedPosition===!0)return;H||(B=!0)}m.push(t)}c(I,"move");document.querySelector("#retry").addEventListener("click",()=>{A.forEach(t=>t.forEach(n=>O.remove(n))),de(),Oe.style.visibility="hidden"});document.getElementById("forward").addEventListener("click",()=>I("forward"));document.getElementById("backward").addEventListener("click",()=>I("backward"));document.getElementById("left").addEventListener("click",()=>I("left"));document.getElementById("right").addEventListener("click",()=>I("right"));globalThis.addEventListener("keydown",t=>{t.keyCode=="38"?I("forward"):t.keyCode=="40"?I("backward"):t.keyCode=="37"?I("left"):t.keyCode=="39"&&I("right")});function Ee(t){requestAnimationFrame(Ee),_||(_=t);let n=t-_;if(_=t,B&&(H=t,B=!1),H){let r=t-H,o=Math.min(r/200,1)*d*2,a=Math.sin(Math.min(r/200,1)*Math.PI)*8*2;switch(m[0]){case"forward":{let i=S*d*2+o;switch(R.position.y=l.CAMERA.POSITION.Y+i,T.position.y=l.DIR_LIGHT.POSITION.Y+i,E.position.y=i,E.position.z=a,x){case"left":E.rotation.z=-(Math.min(r/200,1)-1)*Math.PI/2;break;case"right":E.rotation.z=(Math.min(r/200,1)-1)*Math.PI/2;break;case"backward":E.rotation.z=(Math.min(r/200,1)-1)*Math.PI;break;default:break}break}case"backward":{let i=S*d*2-o;switch(R.position.y=l.CAMERA.POSITION.Y+i,T.position.y=l.DIR_LIGHT.POSITION.Y+i,E.position.y=i,E.position.z=a,x){case"forward":E.rotation.z=-(Math.min(r/200,1)*Math.PI);break;case"left":E.rotation.z=Math.min(r/200,1)*Math.PI/2+Math.PI/2;break;case"right":E.rotation.z=-(Math.min(r/200,1)*Math.PI/2+Math.PI/2);break;default:break}break}case"left":{let i=(C*d+d/2)*2-L*2/2-o;switch(R.position.x=l.CAMERA.POSITION.X+i,T.position.x=l.DIR_LIGHT.POSITION.X+i,E.position.x=i,E.position.z=a,x){case"forward":E.rotation.z=Math.min(r/200,1)*Math.PI/2;break;case"backward":E.rotation.z=-(Math.min(r/200,1)*Math.PI/2-Math.PI);break;case"right":E.rotation.z=-(Math.min(r/200,1)*Math.PI+Math.PI/2);break;default:break}break}case"right":{let i=(C*d+d/2)*2-L*2/2+o;switch(R.position.x=l.CAMERA.POSITION.X+i,T.position.x=l.DIR_LIGHT.POSITION.X+i,E.position.x=i,E.position.z=a,x){case"forward":E.rotation.z=-(Math.min(r/200,1)*Math.PI/2);break;case"backward":E.rotation.z=Math.min(r/200,1)*Math.PI/2-Math.PI;break;case"left":E.rotation.z=Math.min(r/200,1)*Math.PI+Math.PI/2;break;default:break}break}}if(r>200){switch(m[0]){case"forward":{S++,he.innerHTML=S,x="forward";break}case"backward":{S--,he.innerHTML=S,x="backward";break}case"left":{C--,x="left";break}case"right":{C++,x="right";break}}m.shift(),H=m.length===0?null:t}}k.render(O,R)}c(Ee,"animate");requestAnimationFrame(Ee);
