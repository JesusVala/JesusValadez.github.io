var Y=Object.defineProperty;var s=(t,r)=>Y(t,"name",{value:r,configurable:!0});var n0=new THREE.Color().setHex(8900331),F=-100,Z=-100,R=500,_=50*Math.PI/180,y=20*Math.PI/180,U=10*Math.PI/180,G=-Math.tan(_)*500,X=Math.tan(y)*Math.sqrt(500**2+G**2),r0=Object.freeze({DIR_LIGHT:{POSITION:{X:F,Y:Z},SHADOW:{CAMERA:{LEFT:-R,RIGHT:R,TOP:R,BOTTON:-R}}},CAMERA:{ROTATION:{X:_,Y:y,Z:U},POSITION:{X,Y:G}}});var a=42,l=3;var E=a*l,h=42,I=["car","truck","forest"],w=[2,2.5,3];var S=[20,45,60];function L(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));r.position.z=10*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let n=S[Math.floor(Math.random()*S.length)],o=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,n*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return o.position.z=(n/2+20)*2,o.castShadow=!0,o.receiveShadow=!1,t.add(o),t}s(L,"Three");function g(){let t=new THREE.Group,r=s(c=>new THREE.Mesh(new THREE.BoxBufferGeometry(E*2,a*2),new THREE.MeshPhongMaterial({color:c})),"createSection"),n=r(12252245);n.receiveShadow=!0,t.add(n);let o=r(10078278);o.position.x=-E*2,t.add(o);let i=r(10078278);return i.position.x=E*2,t.add(i),t.position.z=1.5*2,t}s(g,"Grass");function p(){let t=new THREE.Group,n=s(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(h*2,a*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(12252245);return n.receiveShadow=!0,t.add(n),t.position.z=1.5*2,t}s(p,"GrassTile");function x(){let t=new THREE.Group,n=s(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(h*2,a*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(4541017);return n.receiveShadow=!0,t.add(n),t.position.z=1.5*2,t}s(x,"RoadTile");function b(){let t=new THREE.Group,n=s(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(h*2,a*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(33023);return n.receiveShadow=!0,t.add(n),t.position.z=1.5*2,t}s(b,"WaterTile");function N(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));r.position.z=10*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let n=S[Math.floor(Math.random()*S.length)],o=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,n*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return o.position.z=(n/2+20)*2,o.castShadow=!0,o.receiveShadow=!1,t.add(o),t}s(N,"ThreeTile");function v(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.IcosahedronGeometry(15*2,1),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return r.castShadow=!0,r.receiveShadow=!0,t.add(r),t}s(v,"RockTile");function C(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(5*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));r.position.z=40*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(130*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return n.position.z=120*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n),t}s(C,"CVBoard");function P(){let t=new THREE.Group,r=s(c=>new THREE.Mesh(new THREE.PlaneBufferGeometry(E*2,a*2),new THREE.MeshPhongMaterial({color:c})),"createSection"),n=r(4541017);n.receiveShadow=!0,t.add(n);let o=r(3751241);o.position.x=-E*2,t.add(o);let i=r(3751241);return i.position.x=E*2,t.add(i),t}s(P,"Road");var H=[10822947,12432952,7909707],V=new u(40,80,[{x:0,y:10,w:30,h:60}]),K=new u(40,80,[{x:10,y:10,w:30,h:60}]),j=new u(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),q=new u(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),J=new u(30,30,[{x:15,y:0,w:10,h:30}]),Q=new u(25,30,[{x:0,y:15,w:10,h:10}]),$=new u(25,30,[{x:0,y:5,w:10,h:10}]);function D(){let t=new THREE.Group,r=H[Math.floor(Math.random()*H.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(60*2,30*2,15*2),new THREE.MeshPhongMaterial({color:r,flatShading:!0}));n.position.z=12*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(33*2,24*2,12*2),[new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:K}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:V}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:j}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:q}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0})]);o.position.x=6*2,o.position.z=25.5*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let i=new f;i.position.x=-18*2,t.add(i);let c=new f;return c.position.x=18*2,t.add(c),t.castShadow=!0,t.receiveShadow=!1,t}s(D,"Car");function k(){let t=new THREE.Group,r=H[Math.floor(Math.random()*H.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(100*2,25*2,5*2),new THREE.MeshLambertMaterial({color:11847420,flatShading:!0}));n.position.z=10*2,t.add(n);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(75*2,35*2,40*2),new THREE.MeshPhongMaterial({color:11847420,flatShading:!0}));o.position.x=15*2,o.position.z=30*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(25*2,30*2,30*2),[new THREE.MeshPhongMaterial({color:r,flatShading:!0}),new THREE.MeshPhongMaterial({color:r,flatShading:!0,map:J}),new THREE.MeshPhongMaterial({color:r,flatShading:!0,map:Q}),new THREE.MeshPhongMaterial({color:r,flatShading:!0,map:$}),new THREE.MeshPhongMaterial({color:r,flatShading:!0}),new THREE.MeshPhongMaterial({color:r,flatShading:!0})]);i.position.x=-40*2,i.position.z=20*2,i.castShadow=!0,i.receiveShadow=!0,t.add(i);let c=new f;c.position.x=-38*2,t.add(c);let m=new f;m.position.x=-10*2,t.add(m);let M=new f;return M.position.x=30*2,t.add(M),t}s(k,"Truck");function f(){let t=new THREE.Mesh(new THREE.BoxBufferGeometry(12*2,33*2,12*2),new THREE.MeshLambertMaterial({color:3355443,flatShading:!0}));return t.position.z=6*2,t}s(f,"Wheel");function u(t,r,n){let o=document.createElement("canvas");o.width=t,o.height=r;let i=o.getContext("2d");return i.fillStyle="#ffffff",i.fillRect(0,0,t,r),i.fillStyle="rgba(0,0,0,0.6)",n.forEach(c=>{i.fillRect(c.x,c.y,c.w,c.h)}),new THREE.CanvasTexture(o)}s(u,"Texture");var d={GRASS:0,ROAD:1,THREE:2,ROCK:3,OCCUPIED:4,WATER:5,B:0,C:0,TOURBUILDING:8,BOARD:9},T=[[1,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,2],[1,0,0,0,0,1,0,9,0,0,2,0,2,2,2,0,2,0,2,2,0,0,0,2,2,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,0,2,0,2,0,0,0,2,2,2,2,2,2,0,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,1,2,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2],[1,0,0,0,0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,0,0,0,0,1,4,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,4,4,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,4,4,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,5,5,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,2,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,5,5,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function z(){let t=new THREE.Group,r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*h*2,2*a*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));r.position.z=10*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(3*h*2,1*a*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));n.position.z=30*2,n.position.y=h,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*h*2,2*a*2,2*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));o.position.z=41*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(3*h*2,2*2,20*2),new THREE.MeshPhongMaterial({color:6829312,flatShading:!0}));return i.position.z=h*2+h/2,i.position.y=-h*2,i.castShadow=!0,i.receiveShadow=!0,t.add(i),t}s(z,"TourBuilding");function H0(t){let r=new Array(T.length);for(let n=0;n<T.length;n++){r[n]=new Array(T[n].length);for(let o=0;o<T[n].length;o++){let i=new e0(T[n][o],n,o);i.mesh.position.x=n*a*2-a*2,i.mesh.position.y=o*a*2,t.add(i.mesh),r[n][o]=i}}return r}s(H0,"generateMap");function e0(t,r,n){this.x_index=r,this.y_index=n,this.type=t,this.occupiedPosition=!1;let o=null;switch(this.type){case d.GRASS:this.mesh=new p;break;case d.ROAD:this.mesh=new x;break;case d.THREE:this.mesh=new p,o=new N,o.position.x=a*2-a*2,this.mesh.add(o),this.occupiedPosition=!0;break;case d.ROCK:this.mesh=new p,o=new v,o.position.x=a*2-a*2,this.mesh.add(o),this.occupiedPosition=!0;break;case d.OCCUPIED:this.mesh=new x,this.occupiedPosition=!0;break;case d.WATER:this.mesh=new b,this.occupiedPosition=!0;break;case d.TOURBUILDING:this.mesh=new x,o=new z,o.position.x=a*2,o.position.y=a*2/-2,this.mesh.add(o),this.occupiedPosition=!0;break;case d.BOARD:this.mesh=new x,o=new C,o.position.x=a*2-a*2,this.mesh.add(o),this.occupiedPosition=!0;break;default:this.mesh=new p;break}}s(e0,"Tile");var m0=s((t,r,n,o,i,c,m,M,O,A,B)=>{lanes=t0(t),currentLane=0,currentColumn=Math.floor(l/2),previousTimestamp=null,startMoving=!1,moves=[],O.position.x=0,O.position.y=0,A.position.y=initialCameraPositionY,A.position.x=initialCameraPositionX,B.position.x=initialDirLightPositionX,B.position.y=initialDirLightPositionY},"initaliseValues"),t0=s(t=>[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9].map(r=>{let n=new W(r);return n.mesh.position.y=r*a*2,t.add(n.mesh),n}).filter(r=>r.index>=0),"generateLanes"),I0=s((t,r)=>{let n=r.length,o=new W(n);o.mesh.position.y=n*a*2,t.add(o.mesh),r.push(o)},"addLane");function W(t){switch(this.index=t,this.type=t<=0?"field":I[Math.floor(Math.random()*I.length)],this.type){case"field":{this.type="field",this.mesh=new g;break}case"forest":{this.mesh=new g,this.occupiedPositions=new Set,this.threes=[1,2,3,4].map(()=>{let r=new L,n;do n=Math.floor(Math.random()*l);while(this.occupiedPositions.has(n));return this.occupiedPositions.add(n),r.position.x=(n*a+a/2)*2-E*2/2,this.mesh.add(r),r});break}case"car":{this.mesh=new P,this.direction=Math.random()>=.5;let r=new Set;this.vechicles=[1,2,3].map(()=>{let n=new D,o;do o=Math.floor(Math.random()*l/2);while(r.has(o));return r.add(o),n.position.x=(o*a*2+a/2)*2-E*2/2,this.direction||(n.rotation.z=Math.PI),this.mesh.add(n),n}),this.speed=w[Math.floor(Math.random()*w.length)];break}case"truck":{this.mesh=new P,this.direction=Math.random()>=.5;let r=new Set;this.vechicles=[1,2].map(()=>{let n=new k,o;do o=Math.floor(Math.random()*l/3);while(r.has(o));return r.add(o),n.position.x=(o*a*3+a/2)*2-E*2/2,this.direction||(n.rotation.z=Math.PI),this.mesh.add(n),n}),this.speed=w[Math.floor(Math.random()*w.length)];break}}}s(W,"Lane");export{I0 as addLane,t0 as generateLanes,H0 as generateMap,m0 as initaliseValues};
