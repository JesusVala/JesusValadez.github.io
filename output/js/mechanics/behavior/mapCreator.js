var y=Object.defineProperty;var i=(t,o)=>y(t,"name",{value:o,configurable:!0});var U=new THREE.Color().setHex(8900331),B=-100,D=-100,u=500,H=50*Math.PI/180,g=20*Math.PI/180,C=10*Math.PI/180,O=-Math.tan(H)*500,v=Math.tan(g)*Math.sqrt(500**2+O**2),V=Object.freeze({DIR_LIGHT:{POSITION:{X:B,Y:D},SHADOW:{CAMERA:{LEFT:-u,RIGHT:u,TOP:u,BOTTON:-u}}},CAMERA:{ROTATION:{X:H,Y:g,Z:C},POSITION:{X:v,Y:O}}});var c=42,l=17,h=c*l,M=["car","truck","forest"],E=[2,2.5,3];var P=[20,45,60];function _(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.BoxBufferGeometry(15*20,15*20,20*20),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));o.position.z=10*20,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let n=P[Math.floor(Math.random()*P.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(30*20,30*20,n*20),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return r.position.z=(n/2+20)*20,r.castShadow=!0,r.receiveShadow=!1,t.add(r),t}i(_,"Three");function f(){let t=new THREE.Group,n=i(r=>new THREE.Mesh(new THREE.BoxBufferGeometry(h*20,c*20,3*20),new THREE.MeshPhongMaterial({color:r})),"createSection")(12252245);return n.receiveShadow=!0,t.add(n),t.position.z=1.5*20,t}i(f,"Grass");function R(){let t=new THREE.Group,o=i(s=>new THREE.Mesh(new THREE.PlaneBufferGeometry(h*20,c*20),new THREE.MeshPhongMaterial({color:s})),"createSection"),n=o(4541017);n.receiveShadow=!0,t.add(n);let r=o(3751241);r.position.x=-h*20,t.add(r);let a=o(3751241);return a.position.x=h*20,t.add(a),t}i(R,"Road");var p=[10822947,12432952,7909707],G=new d(40,80,[{x:0,y:10,w:30,h:60}]),b=new d(40,80,[{x:10,y:10,w:30,h:60}]),k=new d(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),W=new d(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),z=new d(30,30,[{x:15,y:0,w:10,h:30}]),Y=new d(25,30,[{x:0,y:15,w:10,h:10}]),X=new d(25,30,[{x:0,y:5,w:10,h:10}]);function A(){let t=new THREE.Group,o=p[Math.floor(Math.random()*p.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(60*20,30*20,15*20),new THREE.MeshPhongMaterial({color:o,flatShading:!0}));n.position.z=12*20,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(33*20,24*20,12*20),[new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:b}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:G}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:k}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:W}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0})]);r.position.x=6*20,r.position.z=25.5*20,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let a=new T;a.position.x=-18*20,t.add(a);let s=new T;return s.position.x=18*20,t.add(s),t.castShadow=!0,t.receiveShadow=!1,t}i(A,"Car");function L(){let t=new THREE.Group,o=p[Math.floor(Math.random()*p.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(100*20,25*20,5*20),new THREE.MeshLambertMaterial({color:11847420,flatShading:!0}));n.position.z=10*20,t.add(n);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(75*20,35*20,40*20),new THREE.MeshPhongMaterial({color:11847420,flatShading:!0}));r.position.x=15*20,r.position.z=30*20,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let a=new THREE.Mesh(new THREE.BoxBufferGeometry(25*20,30*20,30*20),[new THREE.MeshPhongMaterial({color:o,flatShading:!0}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:z}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:Y}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:X}),new THREE.MeshPhongMaterial({color:o,flatShading:!0}),new THREE.MeshPhongMaterial({color:o,flatShading:!0})]);a.position.x=-40*20,a.position.z=20*20,a.castShadow=!0,a.receiveShadow=!0,t.add(a);let s=new T;s.position.x=-38*20,t.add(s);let x=new T;x.position.x=-10*20,t.add(x);let w=new T;return w.position.x=30*20,t.add(w),t}i(L,"Truck");function T(){let t=new THREE.Mesh(new THREE.BoxBufferGeometry(12*20,33*20,12*20),new THREE.MeshLambertMaterial({color:3355443,flatShading:!0}));return t.position.z=6*20,t}i(T,"Wheel");function d(t,o,n){let r=document.createElement("canvas");r.width=t,r.height=o;let a=r.getContext("2d");return a.fillStyle="#ffffff",a.fillRect(0,0,t,o),a.fillStyle="rgba(0,0,0,0.6)",n.forEach(s=>{a.fillRect(s.x,s.y,s.w,s.h)}),new THREE.CanvasTexture(r)}i(d,"Texture");var re=i((t,o,n,r,a,s,x,w,I,m,S)=>{lanes=Z(t),currentLane=0,currentColumn=Math.floor(l/2),previousTimestamp=null,startMoving=!1,moves=[],I.position.x=0,I.position.y=0,m.position.y=initialCameraPositionY,m.position.x=initialCameraPositionX,S.position.x=initialDirLightPositionX,S.position.y=initialDirLightPositionY},"initaliseValues"),Z=i(t=>[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9].map(o=>{let n=new N(o);return n.mesh.position.y=o*c*20,t.add(n.mesh),n}).filter(o=>o.index>=0),"generateLanes"),ae=i((t,o)=>{let n=o.length,r=new N(n);r.mesh.position.y=n*c*20,t.add(r.mesh),o.push(r)},"addLane");function N(t){switch(this.index=t,this.type=t<=0?"field":M[Math.floor(Math.random()*M.length)],this.type){case"field":{this.type="field",this.mesh=new f;break}case"forest":{this.mesh=new f,this.occupiedPositions=new Set,this.threes=[1,2,3,4].map(()=>{let o=new _,n;do n=Math.floor(Math.random()*l);while(this.occupiedPositions.has(n));return this.occupiedPositions.add(n),o.position.x=(n*c+c/2)*20-h*20/2,this.mesh.add(o),o});break}case"car":{this.mesh=new R,this.direction=Math.random()>=.5;let o=new Set;this.vechicles=[1,2,3].map(()=>{let n=new A,r;do r=Math.floor(Math.random()*l/2);while(o.has(r));return o.add(r),n.position.x=(r*c*2+c/2)*20-h*20/2,this.direction||(n.rotation.z=Math.PI),this.mesh.add(n),n}),this.speed=E[Math.floor(Math.random()*E.length)];break}case"truck":{this.mesh=new R,this.direction=Math.random()>=.5;let o=new Set;this.vechicles=[1,2].map(()=>{let n=new L,r;do r=Math.floor(Math.random()*l/3);while(o.has(r));return o.add(r),n.position.x=(r*c*3+c/2)*20-h*20/2,this.direction||(n.rotation.z=Math.PI),this.mesh.add(n),n}),this.speed=E[Math.floor(Math.random()*E.length)];break}}}i(N,"Lane");export{ae as addLane,Z as generateLanes,re as initaliseValues};
