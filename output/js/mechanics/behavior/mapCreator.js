var W=Object.defineProperty;var a=(t,o)=>W(t,"name",{value:o,configurable:!0});var o0=new THREE.Color().setHex(8900331),Y=-100,Z=-100,M=500,A=50*Math.PI/180,y=20*Math.PI/180,X=10*Math.PI/180,B=-Math.tan(A)*500,F=Math.tan(y)*Math.sqrt(500**2+B**2),n0=Object.freeze({DIR_LIGHT:{POSITION:{X:Y,Y:Z},SHADOW:{CAMERA:{LEFT:-M,RIGHT:M,TOP:M,BOTTON:-M}}},CAMERA:{ROTATION:{X:A,Y:y,Z:X},POSITION:{X:F,Y:B}}});var i=42,E=3;var h=i*E,u=42,H=["car","truck","forest"],w=[2,2.5,3];var R=[20,45,60];function b(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));o.position.z=10*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let r=R[Math.floor(Math.random()*R.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,r*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return n.position.z=(r/2+20)*2,n.castShadow=!0,n.receiveShadow=!1,t.add(n),t}a(b,"Three");function I(){let t=new THREE.Group,o=a(c=>new THREE.Mesh(new THREE.BoxBufferGeometry(h*2,i*2),new THREE.MeshPhongMaterial({color:c})),"createSection"),r=o(12252245);r.receiveShadow=!0,t.add(r);let n=o(10078278);n.position.x=-h*2,t.add(n);let s=o(10078278);return s.position.x=h*2,t.add(s),t.position.z=1.5*2,t}a(I,"Grass");function T(){let t=new THREE.Group,r=a(n=>new THREE.Mesh(new THREE.BoxBufferGeometry(u*2,i*2),new THREE.MeshPhongMaterial({color:n})),"createSection")(12252245);return r.receiveShadow=!0,t.add(r),t.position.z=1.5*2,t}a(T,"GrassTile");function p(){let t=new THREE.Group,r=a(n=>new THREE.Mesh(new THREE.BoxBufferGeometry(u*2,i*2),new THREE.MeshPhongMaterial({color:n})),"createSection")(4541017);return r.receiveShadow=!0,t.add(r),t.position.z=1.5*2,t}a(p,"RoadTile");function L(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));o.position.z=10*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let r=R[Math.floor(Math.random()*R.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,r*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return n.position.z=(r/2+20)*2,n.castShadow=!0,n.receiveShadow=!1,t.add(n),t}a(L,"ThreeTile");function G(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.IcosahedronGeometry(15*2,1),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return o.castShadow=!0,o.receiveShadow=!0,t.add(o),t}a(G,"RockTile");function N(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.BoxBufferGeometry(5*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));o.position.z=40*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(130*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return r.position.z=120*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r),t}a(N,"CVBoard");function g(){let t=new THREE.Group,o=a(c=>new THREE.Mesh(new THREE.PlaneBufferGeometry(h*2,i*2),new THREE.MeshPhongMaterial({color:c})),"createSection"),r=o(4541017);r.receiveShadow=!0,t.add(r);let n=o(3751241);n.position.x=-h*2,t.add(n);let s=o(3751241);return s.position.x=h*2,t.add(s),t}a(g,"Road");var m=[10822947,12432952,7909707],V=new d(40,80,[{x:0,y:10,w:30,h:60}]),U=new d(40,80,[{x:10,y:10,w:30,h:60}]),j=new d(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),q=new d(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),K=new d(30,30,[{x:15,y:0,w:10,h:30}]),J=new d(25,30,[{x:0,y:15,w:10,h:10}]),Q=new d(25,30,[{x:0,y:5,w:10,h:10}]);function k(){let t=new THREE.Group,o=m[Math.floor(Math.random()*m.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(60*2,30*2,15*2),new THREE.MeshPhongMaterial({color:o,flatShading:!0}));r.position.z=12*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(33*2,24*2,12*2),[new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:U}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:V}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:j}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:q}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0})]);n.position.x=6*2,n.position.z=25.5*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let s=new x;s.position.x=-18*2,t.add(s);let c=new x;return c.position.x=18*2,t.add(c),t.castShadow=!0,t.receiveShadow=!1,t}a(k,"Car");function v(){let t=new THREE.Group,o=m[Math.floor(Math.random()*m.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(100*2,25*2,5*2),new THREE.MeshLambertMaterial({color:11847420,flatShading:!0}));r.position.z=10*2,t.add(r);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(75*2,35*2,40*2),new THREE.MeshPhongMaterial({color:11847420,flatShading:!0}));n.position.x=15*2,n.position.z=30*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let s=new THREE.Mesh(new THREE.BoxBufferGeometry(25*2,30*2,30*2),[new THREE.MeshPhongMaterial({color:o,flatShading:!0}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:K}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:J}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:Q}),new THREE.MeshPhongMaterial({color:o,flatShading:!0}),new THREE.MeshPhongMaterial({color:o,flatShading:!0})]);s.position.x=-40*2,s.position.z=20*2,s.castShadow=!0,s.receiveShadow=!0,t.add(s);let c=new x;c.position.x=-38*2,t.add(c);let S=new x;S.position.x=-10*2,t.add(S);let f=new x;return f.position.x=30*2,t.add(f),t}a(v,"Truck");function x(){let t=new THREE.Mesh(new THREE.BoxBufferGeometry(12*2,33*2,12*2),new THREE.MeshLambertMaterial({color:3355443,flatShading:!0}));return t.position.z=6*2,t}a(x,"Wheel");function d(t,o,r){let n=document.createElement("canvas");n.width=t,n.height=o;let s=n.getContext("2d");return s.fillStyle="#ffffff",s.fillRect(0,0,t,o),s.fillStyle="rgba(0,0,0,0.6)",r.forEach(c=>{s.fillRect(c.x,c.y,c.w,c.h)}),new THREE.CanvasTexture(n)}a(d,"Texture");var C=["grass","road","three","rock","occupied","","","","tourbuilding","board"],l=[[1,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,2],[1,0,0,0,0,1,0,9,0,0,2,0,2,2,2,0,2,0,2,2,0,0,0,2,2,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,0,2,0,2,0,0,0,2,2,2,2,2,2,0,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,1,2,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2],[1,0,0,0,0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,0,0,0,0,1,4,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,4,4,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,4,4,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,1,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function D(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*u*2,2*i*2,40*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));return o.position.z=20*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o),t}a(D,"TourBuilding");function R0(t){let o=new Array(l.length);for(let r=0;r<l.length;r++){o[r]=new Array(l[r].length);for(let n=0;n<l[r].length;n++){let s=new $(l[r][n],r,n);s.mesh.position.x=r*i*2-i*2,s.mesh.position.y=n*i*2,t.add(s.mesh),o[r][n]=s}}return o}a(R0,"generateMap");function $(t,o,r){this.x_index=o,this.y_index=r,this.type=C[t],this.occupiedPosition=!1;let n=null;switch(this.type){case"grass":this.mesh=new T;break;case"road":this.mesh=new p;break;case"three":this.mesh=new T,n=new L,n.position.x=i*2-i*2,this.mesh.add(n),this.occupiedPosition=!0;break;case"rock":this.mesh=new T,n=new G,n.position.x=i*2-i*2,this.mesh.add(n),this.occupiedPosition=!0;break;case"occupied":this.mesh=new p,this.occupiedPosition=!0;break;case"tourbuilding":this.mesh=new p,n=new D,n.position.x=i*2,n.position.y=i*2/-2,this.mesh.add(n),this.occupiedPosition=!0;break;case"board":this.mesh=new p,n=new N,n.position.x=i*2-i*2,this.mesh.add(n),this.occupiedPosition=!0;break;default:this.mesh=new T;break}}a($,"Tile");var m0=a((t,o,r,n,s,c,S,f,P,_,O)=>{lanes=e0(t),currentLane=0,currentColumn=Math.floor(E/2),previousTimestamp=null,startMoving=!1,moves=[],P.position.x=0,P.position.y=0,_.position.y=initialCameraPositionY,_.position.x=initialCameraPositionX,O.position.x=initialDirLightPositionX,O.position.y=initialDirLightPositionY},"initaliseValues"),e0=a(t=>[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9].map(o=>{let r=new z(o);return r.mesh.position.y=o*i*2,t.add(r.mesh),r}).filter(o=>o.index>=0),"generateLanes"),S0=a((t,o)=>{let r=o.length,n=new z(r);n.mesh.position.y=r*i*2,t.add(n.mesh),o.push(n)},"addLane");function z(t){switch(this.index=t,this.type=t<=0?"field":H[Math.floor(Math.random()*H.length)],this.type){case"field":{this.type="field",this.mesh=new I;break}case"forest":{this.mesh=new I,this.occupiedPositions=new Set,this.threes=[1,2,3,4].map(()=>{let o=new b,r;do r=Math.floor(Math.random()*E);while(this.occupiedPositions.has(r));return this.occupiedPositions.add(r),o.position.x=(r*i+i/2)*2-h*2/2,this.mesh.add(o),o});break}case"car":{this.mesh=new g,this.direction=Math.random()>=.5;let o=new Set;this.vechicles=[1,2,3].map(()=>{let r=new k,n;do n=Math.floor(Math.random()*E/2);while(o.has(n));return o.add(n),r.position.x=(n*i*2+i/2)*2-h*2/2,this.direction||(r.rotation.z=Math.PI),this.mesh.add(r),r}),this.speed=w[Math.floor(Math.random()*w.length)];break}case"truck":{this.mesh=new g,this.direction=Math.random()>=.5;let o=new Set;this.vechicles=[1,2].map(()=>{let r=new v,n;do n=Math.floor(Math.random()*E/3);while(o.has(n));return o.add(n),r.position.x=(n*i*3+i/2)*2-h*2/2,this.direction||(r.rotation.z=Math.PI),this.mesh.add(r),r}),this.speed=w[Math.floor(Math.random()*w.length)];break}}}a(z,"Lane");export{S0 as addLane,e0 as generateLanes,R0 as generateMap,m0 as initaliseValues};
