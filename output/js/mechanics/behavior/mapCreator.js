var K=Object.defineProperty;var a=(n,t)=>K(n,"name",{value:t,configurable:!0});var ce=new THREE.Color().setHex(8900331),j=-100,q=-100,M=500,y=50*Math.PI/180,_=20*Math.PI/180,J=10*Math.PI/180,b=-Math.tan(y)*500,Q=Math.tan(_)*Math.sqrt(500**2+b**2),Ee=Object.freeze({DIR_LIGHT:{POSITION:{X:j,Y:q},SHADOW:{CAMERA:{LEFT:-M,RIGHT:M,TOP:M,BOTTON:-M}}},CAMERA:{ROTATION:{X:y,Y:_,Z:J},POSITION:{X:Q,Y:b}}});var h=42,l=3;var u=h*l,s=42,g=["car","truck","forest"],f=[2,2.5,3];var S=[20,45,60];function C(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));t.position.z=10*2,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=S[Math.floor(Math.random()*S.length)],o=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,r*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return o.position.z=(r/2+20)*2,o.castShadow=!0,o.receiveShadow=!1,n.add(o),n}a(C,"Three");function B(){let n=new THREE.Group,t=a(E=>new THREE.Mesh(new THREE.BoxBufferGeometry(u*2,h*2),new THREE.MeshPhongMaterial({color:E})),"createSection"),r=t(12252245);r.receiveShadow=!0,n.add(r);let o=t(10078278);o.position.x=-u*2,n.add(o);let i=t(10078278);return i.position.x=u*2,n.add(i),n.position.z=1.5*2,n}a(B,"Grass");function p(){let n=new THREE.Group,r=a(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(s*2,h*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(12252245);return r.receiveShadow=!0,n.add(r),n.position.z=1.5*2,n}a(p,"GrassTile");function d(){let n=new THREE.Group,r=a(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(s*2,h*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(4541017);return r.receiveShadow=!0,n.add(r),n.position.z=1.5*2,n}a(d,"RoadTile");function L(){let n=new THREE.Group,r=a(o=>new THREE.Mesh(new THREE.BoxBufferGeometry(s*2,h*2),new THREE.MeshPhongMaterial({color:o})),"createSection")(33023);return r.receiveShadow=!0,n.add(r),n.position.z=1.5*2,n}a(L,"WaterTile");function v(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));t.position.z=10*2,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=S[Math.floor(Math.random()*S.length)],o=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,r*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return o.position.z=(r/2+20)*2,o.castShadow=!0,o.receiveShadow=!1,n.add(o),n}a(v,"ThreeTile");function D(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.IcosahedronGeometry(15*2,1),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return t.castShadow=!0,t.receiveShadow=!0,n.add(t),n}a(D,"RockTile");function N(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(5*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));t.position.z=40*2,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(130*2,5*2,80*2),new THREE.MeshPhongMaterial({color:8421504,flatShading:!0}));return r.position.z=120*2,r.castShadow=!0,r.receiveShadow=!0,n.add(r),n}a(N,"CVBoard");function I(){let n=new THREE.Group,t=a(E=>new THREE.Mesh(new THREE.PlaneBufferGeometry(u*2,h*2),new THREE.MeshPhongMaterial({color:E})),"createSection"),r=t(4541017);r.receiveShadow=!0,n.add(r);let o=t(3751241);o.position.x=-u*2,n.add(o);let i=t(3751241);return i.position.x=u*2,n.add(i),n}a(I,"Road");var H=[10822947,12432952,7909707],$=new w(40,80,[{x:0,y:10,w:30,h:60}]),ee=new w(40,80,[{x:10,y:10,w:30,h:60}]),te=new w(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),oe=new w(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),ne=new w(30,30,[{x:15,y:0,w:10,h:30}]),re=new w(25,30,[{x:0,y:15,w:10,h:10}]),ie=new w(25,30,[{x:0,y:5,w:10,h:10}]);function P(){let n=new THREE.Group,t=H[Math.floor(Math.random()*H.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(60*2,30*2,15*2),new THREE.MeshPhongMaterial({color:t,flatShading:!0}));r.position.z=12*2,r.castShadow=!0,r.receiveShadow=!0,n.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(33*2,24*2,12*2),[new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:ee}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:$}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:te}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:oe}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0})]);o.position.x=6*2,o.position.z=25.5*2,o.castShadow=!0,o.receiveShadow=!0,n.add(o);let i=new R;i.position.x=-18*2,n.add(i);let E=new R;return E.position.x=18*2,n.add(E),n.castShadow=!0,n.receiveShadow=!1,n}a(P,"Car");function k(){let n=new THREE.Group,t=H[Math.floor(Math.random()*H.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(100*2,25*2,5*2),new THREE.MeshLambertMaterial({color:11847420,flatShading:!0}));r.position.z=10*2,n.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(75*2,35*2,40*2),new THREE.MeshPhongMaterial({color:11847420,flatShading:!0}));o.position.x=15*2,o.position.z=30*2,o.castShadow=!0,o.receiveShadow=!0,n.add(o);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(25*2,30*2,30*2),[new THREE.MeshPhongMaterial({color:t,flatShading:!0}),new THREE.MeshPhongMaterial({color:t,flatShading:!0,map:ne}),new THREE.MeshPhongMaterial({color:t,flatShading:!0,map:re}),new THREE.MeshPhongMaterial({color:t,flatShading:!0,map:ie}),new THREE.MeshPhongMaterial({color:t,flatShading:!0}),new THREE.MeshPhongMaterial({color:t,flatShading:!0})]);i.position.x=-40*2,i.position.z=20*2,i.castShadow=!0,i.receiveShadow=!0,n.add(i);let E=new R;E.position.x=-38*2,n.add(E);let m=new R;m.position.x=-10*2,n.add(m);let x=new R;return x.position.x=30*2,n.add(x),n}a(k,"Truck");function R(){let n=new THREE.Mesh(new THREE.BoxBufferGeometry(12*2,33*2,12*2),new THREE.MeshLambertMaterial({color:3355443,flatShading:!0}));return n.position.z=6*2,n}a(R,"Wheel");function w(n,t,r){let o=document.createElement("canvas");o.width=n,o.height=t;let i=o.getContext("2d");return i.fillStyle="#ffffff",i.fillRect(0,0,n,t),i.fillStyle="rgba(0,0,0,0.6)",r.forEach(E=>{i.fillRect(E.x,E.y,E.w,E.h)}),new THREE.CanvasTexture(o)}a(w,"Texture");var c={GRASS:0,ROAD:1,THREE:2,ROCK:3,OCCUPIED:4,WATER:5,VEHICLE:6,C:0,TOURBUILDING:8,BOARD:9,LUBTRAC_CONTAINNER:10,LUBTRAC_BOARD:11,BOSCH_CUBES:12,BOSCH_BOARD:13,BOSCH_DIGITAL:14,AG_BOARD:15},T=[[1,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,2],[1,0,0,0,0,1,0,9,0,0,2,0,2,2,2,0,2,0,2,2,0,0,0,2,2,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,0,2,0,2,0,0,0,2,2,2,2,2,2,0,2,0,2,0,2],[1,0,0,0,0,1,0,0,0,0,2,1,2,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2],[1,0,0,0,0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,0,0,0,0,1,4,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,4,4,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,4,4,0,0,0,0,0,1,1,1,0,0,1,10,4,0,0,1,6,1,12,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,1,0,15,1,1,0,0,11,4,4,0,0,13,4,1,14,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,1,0,5,5,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,2,5,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,0,5,5,5,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];function z(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,2*h*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));t.position.z=10*2,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,1*h*2,20*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));r.position.z=30*2,r.position.y=s,r.castShadow=!0,r.receiveShadow=!0,n.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,2*h*2,2*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));o.position.z=41*2,o.castShadow=!0,o.receiveShadow=!0,n.add(o);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(3*s*2,2*2,20*2),new THREE.MeshPhongMaterial({color:6829312,flatShading:!0}));return i.position.z=s*2+s/2,i.position.y=-s*2,i.castShadow=!0,i.receiveShadow=!0,n.add(i),n}a(z,"TourBuilding");function F(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.CylinderGeometry(35*2,35*2,2*s*2,10),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));return t.position.z=s*2,t.position.y=s*2/2,t.position.x=s*2/2,t.rotation.x=Math.PI/2,t.castShadow=!0,t.receiveShadow=!0,n.add(t),n}a(F,"LubtracContainner");function W(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));t.position.z=30*2,t.position.y=s*2/-2,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));r.position.z=30*2,r.position.y=s*2/2,r.castShadow=!0,r.receiveShadow=!0,n.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,s*2,20*2),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));o.position.z=30*2,o.castShadow=!0,o.receiveShadow=!0,n.add(o);let i=new THREE.Mesh(new THREE.BoxBufferGeometry(6*2,s*2,30*2),new THREE.MeshPhongMaterial({color:16777215,flatShading:!0}));return i.position.z=75*2,i.castShadow=!0,i.receiveShadow=!0,n.add(i),n}a(W,"LubtracBoard");function U(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(10*2,10*2,10*2),new THREE.MeshPhongMaterial({color:1197863,flatShading:!0}));t.position.z=5*2,t.position.y=s*2/-4,t.position.x=s*2/-4,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(10*2,10*2,10*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));r.position.z=5*2,r.position.y=s*2/4,r.castShadow=!0,r.receiveShadow=!0,n.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(10*2,10*2,10*2),new THREE.MeshPhongMaterial({color:10040319,flatShading:!0}));return o.position.z=5*2,o.position.y=s*2/-4,o.position.x=s*2/4,o.castShadow=!0,o.receiveShadow=!0,n.add(o),n}a(U,"BoschCubes");function Y(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));t.position.z=30*2,t.position.y=s*2/-2,t.castShadow=!0,t.receiveShadow=!0,n.add(t);let r=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,3*2,60*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));r.position.z=30*2,r.position.y=s*2/2,r.castShadow=!0,r.receiveShadow=!0,n.add(r);let o=new THREE.Mesh(new THREE.BoxBufferGeometry(6*2,s*2,30*2),new THREE.MeshPhongMaterial({color:1329151,flatShading:!0}));return o.position.z=75*2,o.castShadow=!0,o.receiveShadow=!0,n.add(o),n}a(Y,"BoschBoard");function Z(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,s*2,s*2),new THREE.MeshPhongMaterial({color:0,flatShading:!0}));return t.position.z=s*2/2,t.castShadow=!0,t.receiveShadow=!0,n.add(t),n}a(Z,"BoschDigital");function X(){let n=new THREE.Group,t=new THREE.Mesh(new THREE.BoxBufferGeometry(3*2,s*2,s*2),new THREE.MeshPhongMaterial({color:16744448,flatShading:!0}));return t.position.z=s*2/2,t.castShadow=!0,t.receiveShadow=!0,n.add(t),n}a(X,"AGBoard");function Pe(n){let t=new Array(T.length);for(let r=0;r<T.length;r++){t[r]=new Array(T[r].length);for(let o=0;o<T[r].length;o++){let i=new ae(T[r][o],r,o);i.mesh.position.x=r*h*2-h*2,i.mesh.position.y=o*h*2,n.add(i.mesh),t[r][o]=i}}return t}a(Pe,"generateMap");function ae(n,t,r){this.x_index=t,this.y_index=r,this.type=n,this.occupiedPosition=!1;let o=null;switch(this.type){case c.GRASS:this.mesh=new p;break;case c.ROAD:this.mesh=new d;break;case c.THREE:this.mesh=new p,o=new v,o.position.x=h*2-h*2,this.mesh.add(o),this.occupiedPosition=!0;break;case c.ROCK:this.mesh=new p,o=new D,o.position.x=h*2-h*2,this.mesh.add(o),this.occupiedPosition=!0;break;case c.OCCUPIED:this.mesh=new d,this.occupiedPosition=!0;break;case c.WATER:this.mesh=new L,this.occupiedPosition=!0;break;case c.VEHICLE:this.mesh=new d,o=new P,o.position.x=h*2/2,this.mesh.add(o),this.occupiedPosition=!0;break;case c.TOURBUILDING:this.mesh=new d,o=new z,o.position.x=h*2,o.position.y=h*2/-2,this.mesh.add(o),this.occupiedPosition=!0;break;case c.BOARD:this.mesh=new d,o=new N,this.mesh.add(o),this.occupiedPosition=!0;break;case c.LUBTRAC_CONTAINNER:this.mesh=new d,o=new F,this.mesh.add(o),this.occupiedPosition=!0;break;case c.LUBTRAC_BOARD:this.mesh=new d,o=new W,this.mesh.add(o),this.occupiedPosition=!0;break;case c.BOSCH_CUBES:this.mesh=new d,o=new U,this.mesh.add(o),this.occupiedPosition=!0;break;case c.BOSCH_BOARD:this.mesh=new d,o=new Y,this.mesh.add(o),this.occupiedPosition=!0;break;case c.BOSCH_DIGITAL:this.mesh=new d,o=new Z,this.mesh.add(o),this.occupiedPosition=!0;break;case c.AG_BOARD:this.mesh=new d,o=new X,this.mesh.add(o),this.occupiedPosition=!0;break;default:this.mesh=new p;break}}a(ae,"Tile");var Oe=a((n,t,r,o,i,E,m,x,O,A,G)=>{lanes=se(n),currentLane=0,currentColumn=Math.floor(l/2),previousTimestamp=null,startMoving=!1,moves=[],O.position.x=0,O.position.y=0,A.position.y=initialCameraPositionY,A.position.x=initialCameraPositionX,G.position.x=initialDirLightPositionX,G.position.y=initialDirLightPositionY},"initaliseValues"),se=a(n=>[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9].map(t=>{let r=new V(t);return r.mesh.position.y=t*h*2,n.add(r.mesh),r}).filter(t=>t.index>=0),"generateLanes"),Ae=a((n,t)=>{let r=t.length,o=new V(r);o.mesh.position.y=r*h*2,n.add(o.mesh),t.push(o)},"addLane");function V(n){switch(this.index=n,this.type=n<=0?"field":g[Math.floor(Math.random()*g.length)],this.type){case"field":{this.type="field",this.mesh=new B;break}case"forest":{this.mesh=new B,this.occupiedPositions=new Set,this.threes=[1,2,3,4].map(()=>{let t=new C,r;do r=Math.floor(Math.random()*l);while(this.occupiedPositions.has(r));return this.occupiedPositions.add(r),t.position.x=(r*h+h/2)*2-u*2/2,this.mesh.add(t),t});break}case"car":{this.mesh=new I,this.direction=Math.random()>=.5;let t=new Set;this.vechicles=[1,2,3].map(()=>{let r=new P,o;do o=Math.floor(Math.random()*l/2);while(t.has(o));return t.add(o),r.position.x=(o*h*2+h/2)*2-u*2/2,this.direction||(r.rotation.z=Math.PI),this.mesh.add(r),r}),this.speed=f[Math.floor(Math.random()*f.length)];break}case"truck":{this.mesh=new I,this.direction=Math.random()>=.5;let t=new Set;this.vechicles=[1,2].map(()=>{let r=new k,o;do o=Math.floor(Math.random()*l/3);while(t.has(o));return t.add(o),r.position.x=(o*h*3+h/2)*2-u*2/2,this.direction||(r.rotation.z=Math.PI),this.mesh.add(r),r}),this.speed=f[Math.floor(Math.random()*f.length)];break}}}a(V,"Lane");export{Ae as addLane,se as generateLanes,Pe as generateMap,Oe as initaliseValues};
