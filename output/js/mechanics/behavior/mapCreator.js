var N=Object.defineProperty;var i=(t,o)=>N(t,"name",{value:o,configurable:!0});var m=50*Math.PI/180,H=20*Math.PI/180,D=10*Math.PI/180,_=-Math.tan(m)*500,y=Math.tan(H)*Math.sqrt(500**2+_**2),X=Object.freeze({DIR_LIGHT:{POSITION:{X:-100,Y:-100},SHADOW:{CAMERA:{LEFT:-500,RIGHT:500,TOP:500,BOTTON:-500}}},CAMERA:{ROTATION:{X:m,Y:H,Z:D},POSITION:{X:y,Y:_}}});var c=42,E=17,h=c*E,p=["car","truck","forest"],l=[2,2.5,3];var g=[20,45,60];function A(){let t=new THREE.Group,o=new THREE.Mesh(new THREE.BoxBufferGeometry(15*2,15*2,20*2),new THREE.MeshPhongMaterial({color:5056806,flatShading:!0}));o.position.z=10*2,o.castShadow=!0,o.receiveShadow=!0,t.add(o);let r=g[Math.floor(Math.random()*g.length)],n=new THREE.Mesh(new THREE.BoxBufferGeometry(30*2,30*2,r*2),new THREE.MeshLambertMaterial({color:8036893,flatShading:!0}));return n.position.z=(r/2+20)*2,n.castShadow=!0,n.receiveShadow=!1,t.add(n),t}i(A,"Three");function x(){let t=new THREE.Group,o=i(s=>new THREE.Mesh(new THREE.BoxBufferGeometry(h*2,c*2,3*2),new THREE.MeshPhongMaterial({color:s})),"createSection"),r=o(12252245);r.receiveShadow=!0,t.add(r);let n=o(10078278);n.position.x=-h*2,t.add(n);let a=o(10078278);return a.position.x=h*2,t.add(a),t.position.z=1.5*2,t}i(x,"Grass");function M(){let t=new THREE.Group,o=i(s=>new THREE.Mesh(new THREE.PlaneBufferGeometry(h*2,c*2),new THREE.MeshPhongMaterial({color:s})),"createSection"),r=o(4541017);r.receiveShadow=!0,t.add(r);let n=o(3751241);n.position.x=-h*2,t.add(n);let a=o(3751241);return a.position.x=h*2,t.add(a),t}i(M,"Road");var u=[10822947,12432952,7909707],B=new d(40,80,[{x:0,y:10,w:30,h:60}]),G=new d(40,80,[{x:10,y:10,w:30,h:60}]),v=new d(110,40,[{x:10,y:0,w:50,h:30},{x:70,y:0,w:30,h:30}]),C=new d(110,40,[{x:10,y:10,w:50,h:30},{x:70,y:10,w:30,h:30}]),b=new d(30,30,[{x:15,y:0,w:10,h:30}]),W=new d(25,30,[{x:0,y:15,w:10,h:10}]),k=new d(25,30,[{x:0,y:5,w:10,h:10}]);function O(){let t=new THREE.Group,o=u[Math.floor(Math.random()*u.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(60*2,30*2,15*2),new THREE.MeshPhongMaterial({color:o,flatShading:!0}));r.position.z=12*2,r.castShadow=!0,r.receiveShadow=!0,t.add(r);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(33*2,24*2,12*2),[new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:G}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:B}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:v}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0,map:C}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0}),new THREE.MeshPhongMaterial({color:13421772,flatShading:!0})]);n.position.x=6*2,n.position.z=25.5*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let a=new T;a.position.x=-18*2,t.add(a);let s=new T;return s.position.x=18*2,t.add(s),t.castShadow=!0,t.receiveShadow=!1,t}i(O,"Car");function P(){let t=new THREE.Group,o=u[Math.floor(Math.random()*u.length)],r=new THREE.Mesh(new THREE.BoxBufferGeometry(100*2,25*2,5*2),new THREE.MeshLambertMaterial({color:11847420,flatShading:!0}));r.position.z=10*2,t.add(r);let n=new THREE.Mesh(new THREE.BoxBufferGeometry(75*2,35*2,40*2),new THREE.MeshPhongMaterial({color:11847420,flatShading:!0}));n.position.x=15*2,n.position.z=30*2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);let a=new THREE.Mesh(new THREE.BoxBufferGeometry(25*2,30*2,30*2),[new THREE.MeshPhongMaterial({color:o,flatShading:!0}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:b}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:W}),new THREE.MeshPhongMaterial({color:o,flatShading:!0,map:k}),new THREE.MeshPhongMaterial({color:o,flatShading:!0}),new THREE.MeshPhongMaterial({color:o,flatShading:!0})]);a.position.x=-40*2,a.position.z=20*2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);let s=new T;s.position.x=-38*2,t.add(s);let w=new T;w.position.x=-10*2,t.add(w);let I=new T;return I.position.x=30*2,t.add(I),t}i(P,"Truck");function T(){let t=new THREE.Mesh(new THREE.BoxBufferGeometry(12*2,33*2,12*2),new THREE.MeshLambertMaterial({color:3355443,flatShading:!0}));return t.position.z=6*2,t}i(T,"Wheel");function d(t,o,r){let n=document.createElement("canvas");n.width=t,n.height=o;let a=n.getContext("2d");return a.fillStyle="#ffffff",a.fillRect(0,0,t,o),a.fillStyle="rgba(0,0,0,0.6)",r.forEach(s=>{a.fillRect(s.x,s.y,s.w,s.h)}),new THREE.CanvasTexture(n)}i(d,"Texture");var ee=i((t,o,r,n,a,s,w,I,f,S,R)=>{lanes=z(t),currentLane=0,currentColumn=Math.floor(E/2),previousTimestamp=null,startMoving=!1,moves=[],f.position.x=0,f.position.y=0,S.position.y=initialCameraPositionY,S.position.x=initialCameraPositionX,R.position.x=initialDirLightPositionX,R.position.y=initialDirLightPositionY},"initaliseValues"),z=i(t=>[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9].map(o=>{let r=new L(o);return r.mesh.position.y=o*c*2,t.add(r.mesh),r}).filter(o=>o.index>=0),"generateLanes"),te=i((t,o)=>{let r=o.length,n=new L(r);n.mesh.position.y=r*c*2,t.add(n.mesh),o.push(n)},"addLane");function L(t){switch(this.index=t,this.type=t<=0?"field":p[Math.floor(Math.random()*p.length)],this.type){case"field":{this.type="field",this.mesh=new x;break}case"forest":{this.mesh=new x,this.occupiedPositions=new Set,this.threes=[1,2,3,4].map(()=>{let o=new A,r;do r=Math.floor(Math.random()*E);while(this.occupiedPositions.has(r));return this.occupiedPositions.add(r),o.position.x=(r*c+c/2)*2-h*2/2,this.mesh.add(o),o});break}case"car":{this.mesh=new M,this.direction=Math.random()>=.5;let o=new Set;this.vechicles=[1,2,3].map(()=>{let r=new O,n;do n=Math.floor(Math.random()*E/2);while(o.has(n));return o.add(n),r.position.x=(n*c*2+c/2)*2-h*2/2,this.direction||(r.rotation.z=Math.PI),this.mesh.add(r),r}),this.speed=l[Math.floor(Math.random()*l.length)];break}case"truck":{this.mesh=new M,this.direction=Math.random()>=.5;let o=new Set;this.vechicles=[1,2].map(()=>{let r=new P,n;do n=Math.floor(Math.random()*E/3);while(o.has(n));return o.add(n),r.position.x=(n*c*3+c/2)*2-h*2/2,this.direction||(r.rotation.z=Math.PI),this.mesh.add(r),r}),this.speed=l[Math.floor(Math.random()*l.length)];break}}}i(L,"Lane");export{te as addLane,z as generateLanes,ee as initaliseValues};
